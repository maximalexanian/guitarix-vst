// generated automatically
// DO NOT MODIFY!
declare id "maestrowah";
declare name "Maestro Wah";
declare category "Guitar Effects";
declare shortname "Maestro Wah";
declare description "Maestro Boomerang  Wah  EG-1";

import("stdfaust.lib");
import("guitarix.lib");

process(x) = x : _<:*(dry),(*(wet) : pre : fi.iir((b0/a0,b1/a0,b2/a0,b3/a0,b4/a0),(a1/a0,a2/a0,a3/a0,a4/a0))):>_ with {
    LogPot(a, x) = ba.if(a, (exp(a * x) - 1) / (exp(a) - 1), x);
    Inverted(b, x) = ba.if(b, 1 - x, x);
    s = 0.993;
    fs = float(ma.SR);
    pre = fi.dcblockerat(64.7682298922);

    wet = wah_ctrl.wet_dry;
    dry = 1 - wet;

    Wah1 = (x : an.amp_follower_ud(0.01,0.1) : min(0.75) : max(0.09) );

    Wah2 = wah_ctrl.wah : Inverted(1) : LogPot(5) : si.smooth(s);
 
    sl = wah_ctrl.mode;

    Wah3 = (os.oscs(freq) + 1) / 2 : min(0.91) : max(0.25) : Inverted(1) with {
        freq = wah_ctrl.freq;
    }; 

    Wah = select3(sl, Wah2, Wah1, Wah3);
    
    b0 = Wah*(Wah*pow(fs,2)*(fs*(2.72075590065939e-21*fs + 2.47828940556324e-17) + 8.86819759919558e-14) + pow(fs,2)*(fs*(-2.71455853073723e-21*fs - 2.47794028705763e-17) - 8.86817888313842e-14)) + fs*(fs*(fs*(-3.51316538913314e-20*fs - 4.11229500551683e-16) - 1.76902751745081e-12) - 1.98647626221981e-11);

    b1 = Wah*(Wah*pow(fs,3)*(-1.08830236026375e-20*fs - 4.95657881112649e-17) + pow(fs,3)*(1.08582341229489e-20*fs + 4.95588057411526e-17)) + fs*(pow(fs,2)*(1.40526615565326e-19*fs + 8.22459001103366e-16) - 3.97295252443962e-11);

    b2 = Wah*(Wah*pow(fs,2)*(1.63245354039563e-20*pow(fs,2) - 1.77363951983912e-13) + pow(fs,2)*(-1.62873511844234e-20*pow(fs,2) + 1.77363577662768e-13)) + pow(fs,2)*(-2.10789923347988e-19*pow(fs,2) + 3.53805503490162e-12);

    b3 = Wah*(Wah*pow(fs,3)*(-1.08830236026375e-20*fs + 4.95657881112649e-17) + pow(fs,3)*(1.08582341229489e-20*fs - 4.95588057411526e-17)) + fs*(pow(fs,2)*(1.40526615565326e-19*fs - 8.22459001103366e-16) + 3.97295252443962e-11);

    b4 = Wah*(Wah*pow(fs,2)*(fs*(2.72075590065939e-21*fs - 2.47828940556324e-17) + 8.86819759919558e-14) + pow(fs,2)*(fs*(-2.71455853073723e-21*fs + 2.47794028705763e-17) - 8.86817888313842e-14)) + fs*(fs*(fs*(-3.51316538913314e-20*fs + 4.11229500551683e-16) - 1.76902751745081e-12) + 1.98647626221981e-11);

    a0 = Wah*(Wah*pow(fs,2)*(fs*(-4.53925105453318e-22*fs - 2.20007271917577e-18) - 1.9840085993285e-14) + fs*(fs*(fs*(3.15399184914731e-19*fs + 2.2050952353796e-17) + 2.81635784152467e-14) + 3.968017198657e-12)) + fs*(fs*(fs*(2.95651915836617e-20*fs + 3.70386813965067e-17) + 5.39738799500148e-13) + 7.65730526965241e-11) + 7.93603439731401e-10;

    a1 = Wah*(Wah*pow(fs,3)*(1.81570042181327e-21*fs + 4.40014543835154e-18) + fs*(pow(fs,2)*(-1.26159673965892e-18*fs - 4.4101904707592e-17) + 7.93603439731401e-12)) + fs*(pow(fs,2)*(-1.18260766334647e-19*fs - 7.40773627930135e-17) + 1.53146105393048e-10) + 3.1744137589256e-9;

    a2 = Wah*(Wah*pow(fs,2)*(-2.72355063271991e-21*pow(fs,2) + 3.968017198657e-14) + pow(fs,2)*(1.89239510948839e-18*pow(fs,2) - 5.63271568304933e-14)) + pow(fs,2)*(1.7739114950197e-19*pow(fs,2) - 1.0794775990003e-12) + 4.76162063838841e-9;

    a3 = Wah*(Wah*pow(fs,3)*(1.81570042181327e-21*fs - 4.40014543835154e-18) + fs*(pow(fs,2)*(-1.26159673965892e-18*fs + 4.4101904707592e-17) - 7.93603439731401e-12)) + fs*(pow(fs,2)*(-1.18260766334647e-19*fs + 7.40773627930135e-17) - 1.53146105393048e-10) + 3.1744137589256e-9;

    a4 = Wah*(Wah*pow(fs,2)*(fs*(-4.53925105453318e-22*fs + 2.20007271917577e-18) - 1.9840085993285e-14) + fs*(fs*(fs*(3.15399184914731e-19*fs - 2.2050952353796e-17) + 2.81635784152467e-14) - 3.968017198657e-12)) + fs*(fs*(fs*(2.95651915836617e-20*fs - 3.70386813965067e-17) + 5.39738799500148e-13) - 7.65730526965241e-11) + 7.93603439731401e-10;
};
