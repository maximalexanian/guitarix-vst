// generated by ./build_wah.py
// DO NOT MODIFY!
declare id "jenbasswah";
declare name "Jen Bass Wah";
declare category "Guitar Effects";
declare description "Jen BassWah";

import("stdfaust.lib");
import("guitarix.lib");

process(x) = x : _<:*(dry),(*(wet) : pre : fi.iir((b0/a0,b1/a0,b2/a0,b3/a0,b4/a0),(a1/a0,a2/a0,a3/a0,a4/a0))):>_ with {
    LogPot(a, x) = ba.if(a, (exp(a * x) - 1) / (exp(a) - 1), x);
    Inverted(b, x) = ba.if(b, 1 - x, x);
    s = 0.993;
    fs = float(ma.SR);
    pre = fi.dcblockerat(228.636413554);

    wet = wah_ctrl.wet_dry;
    dry = 1 - wet;

    Wah1 = (x : an.amp_follower_ud(0.01,0.1) : min(0.99) : max(0.1)): si.smooth(s);
    
    Wah2 = wah_ctrl.wah : Inverted(1) : LogPot(5) :  si.smooth(s);
    
    sl = wah_ctrl.mode;

    Wah3 = (os.oscs(freq) + 1) / 2 : min(0.98) : max(0.01) : Inverted(1) with {
        freq = wah_ctrl.freq;
    }; 

    Wah = select3(sl, Wah2, Wah1, Wah3);
     
    b0 = Wah*(Wah*pow(fs,2)*(fs*(4.28115775363339e-21*fs + 1.30268272702044e-17) + 1.36038216822257e-14) + fs*(fs*(fs*(-4.26765051664369e-21*fs - 1.30609446727126e-17) - 1.3782974775989e-14) - 2.52409371323892e-13)) + fs*(fs*(fs*(-7.47901710601256e-21*fs - 3.70620297844195e-17) - 5.22012186323421e-14) - 3.09177765505129e-15);

    b1 = Wah*(Wah*pow(fs,3)*(-1.71246310145335e-20*fs - 2.60536545404087e-17) + fs*(pow(fs,2)*(1.70706020665747e-20*fs + 2.61218893454252e-17) - 5.04818742647784e-13)) + fs*(pow(fs,2)*(2.99160684240502e-20*fs + 7.4124059568839e-17) - 6.18355531010259e-15);

    b2 = Wah*(Wah*pow(fs,2)*(2.56869465218003e-20*pow(fs,2) - 2.72076433644514e-14) + pow(fs,2)*(-2.56059030998621e-20*pow(fs,2) + 2.75659495519781e-14)) + pow(fs,2)*(-4.48741026360754e-20*pow(fs,2) + 1.04402437264684e-13);

    b3 = Wah*(Wah*pow(fs,3)*(-1.71246310145335e-20*fs + 2.60536545404087e-17) + fs*(pow(fs,2)*(1.70706020665747e-20*fs - 2.61218893454252e-17) + 5.04818742647784e-13)) + fs*(pow(fs,2)*(2.99160684240502e-20*fs - 7.4124059568839e-17) + 6.18355531010259e-15);

    b4 = Wah*(Wah*pow(fs,2)*(fs*(4.28115775363339e-21*fs - 1.30268272702044e-17) + 1.36038216822257e-14) + fs*(fs*(fs*(-4.26765051664369e-21*fs + 1.30609446727126e-17) - 1.3782974775989e-14) + 2.52409371323892e-13)) + fs*(fs*(fs*(-7.47901710601256e-21*fs + 3.70620297844195e-17) - 5.22012186323421e-14) + 3.09177765505129e-15);

    a0 = Wah*(Wah*pow(fs,2)*(fs*(-7.02628418882998e-20*fs - 8.45822966675918e-18) - 1.78928790753088e-14) + fs*(fs*(fs*(3.87350386089898e-19*fs + 2.30787830877444e-17) + 1.57249804702232e-14) + 4.06656342620655e-13)) + fs*(fs*(fs*(1.19054639174528e-20*fs + 6.24901706816551e-18) + 8.55689125277824e-14) + 1.62180722455991e-12) + 9.24218960501488e-14;

    a1 = Wah*(Wah*pow(fs,3)*(2.81051367553199e-19*fs + 1.69164593335184e-17) + fs*(pow(fs,2)*(-1.54940154435959e-18*fs - 4.61575661754889e-17) + 8.1331268524131e-13)) + fs*(pow(fs,2)*(-4.76218556698113e-20*fs - 1.2498034136331e-17) + 3.24361444911983e-12) + 3.69687584200595e-13;

    a2 = Wah*(Wah*pow(fs,2)*(-4.21577051329799e-19*pow(fs,2) + 3.57857581506176e-14) + pow(fs,2)*(2.32410231653939e-18*pow(fs,2) - 3.14499609404464e-14)) + pow(fs,2)*(7.1432783504717e-20*pow(fs,2) - 1.71137825055565e-13) + 5.54531376300893e-13;

    a3 = Wah*(Wah*pow(fs,3)*(2.81051367553199e-19*fs - 1.69164593335184e-17) + fs*(pow(fs,2)*(-1.54940154435959e-18*fs + 4.61575661754889e-17) - 8.1331268524131e-13)) + fs*(pow(fs,2)*(-4.76218556698113e-20*fs + 1.2498034136331e-17) - 3.24361444911983e-12) + 3.69687584200595e-13;

    a4 = Wah*(Wah*pow(fs,2)*(fs*(-7.02628418882998e-20*fs + 8.45822966675918e-18) - 1.78928790753088e-14) + fs*(fs*(fs*(3.87350386089898e-19*fs - 2.30787830877444e-17) + 1.57249804702232e-14) - 4.06656342620655e-13)) + fs*(fs*(fs*(1.19054639174528e-20*fs - 6.24901706816551e-18) + 8.55689125277824e-14) - 1.62180722455991e-12) + 9.24218960501488e-14;
};
